<!--
<div>
    <h5>{{ market_label }}</h5>
    <table>
      <tr class="ownedList-table-header">
        <th class="m">Company Name</th>
        <th class="m">Qty</th>
        <th class="m">Worth</th>
        <th class="m">Paid</th>
        <th class="m">P/L</th>
      </tr>
    </table>

</div>
-->
<div style="padding-top: 20px;padding-left: 40px;">

  {% for market_label in market_labels %}
  <h5><b>Owned Stocks ({{ market_label[0] }})</b></h5>
  <table id="{{market_label[1]}}_List"  class="ownedList" style="padding-right: 40px;"></table>
  <h4 id="{{market_label[1]}}_PL" align="right" style="padding-right: 40px;"></h4>
  </br></br>
  {% endfor %}

</div>


<script>
  // Create list of user's owned stocks
  $.when($.ajax({
      type: "GET",
      url: "/get_ownedList",      
      dataType: "json",
      success: function(data) {
        
        // Create first row of the tables
        first_row = '<tr class="ownedList-headers">'
        first_row += '<th class="ownedList-header"> Company Name </th><th class="ownedList-header"> Qty </th>'
        first_row += '<th class="ownedList-header"> Worth </th><th class="ownedList-header"> Paid </th><th class="ownedList-header"> P/L </th></tr>'

        no_stock_msg = "<tr><td class='ownedList-data'><i>You don't have any stock in this market.</i></td></tr>"
        $("#nz_List").append(first_row);
        $("#au_List").append(first_row);

        // Check if there's any stock in the market
        if (data.ownedList[0].length == 0){
          $("#nz_List").append(no_stock_msg)
        }

        if (data.ownedList[2].length == 0){
          $("#au_List").append(no_stock_msg)
        }
        
        // Create table of NZ & AU Stocks      
        for (i = 0; i < data.ownedList[0].length; i++){
          $("#nz_List").append(data.ownedList[0][i]);
        }
        for (i = 0; i < data.ownedList[2].length; i++){
          $("#au_List").append(data.ownedList[2][i]);
        }

        // Show P/L for both market
        tot = "</br><div> P/L (NZD): " + data.ownedList[1] + "</div>"
        worth = "</br><div> Stock Worth (NZD): " + data.ownedList[4] + "</div>"
        bank = "</br><div> Bank (NZD): " + data.ownedList[6] + "</div>"
        net = "</br><div> Net Worth (NZD): " + data.ownedList[8] + "</div>"
        $("#nz_PL").append(tot)
        $("#nz_PL").append(worth)
        $("#nz_PL").append(bank)
        $("#nz_PL").append(net)

        
        tot2 = "</br><div> P/L (AUD): " + data.ownedList[3] + "</div>"
        worth2 = "</br><div> Stock Worth (AUD): " + data.ownedList[5] + "</div>"
        bank2 = "</br><div> Bank (AUD): " + data.ownedList[7] + "</div>"
        net2 = "</br><div> Net Worth (AUD): " + data.ownedList[9] + "</div>"
        $("#au_PL").append(tot2)
        $("#au_PL").append(worth2)
        $("#au_PL").append(bank2)
        $("#au_PL").append(net2)
      }
    }))
</script>